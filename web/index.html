<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta httpEquiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" />
    
    <!-- Google Fonts pour les polices officielles Align -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bowlby+One+SC&family=Lilita+One&family=Lato:wght@400;700;900&family=Nunito:wght@900&family=Ruluko&display=swap" rel="stylesheet">
    
    <title>Align</title>
    
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        min-height: 100dvh;
        min-height: 100%;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow-x: hidden;
        background-color: #1A1B23;
      }
      
      /* Container principal : pas de padding global — safe-area uniquement sur la zone header */
      #root {
        display: flex;
        flex-direction: column;
        width: 100%;
        min-width: 100%;
        height: 100%;
        min-height: 100vh; /* fallback */
        min-height: 100dvh; /* iOS Safari viewport correct */
        flex-shrink: 0;
        overflow-x: hidden;
        background-color: #1A1B23;
        box-sizing: border-box;
      }

      /* Zone header uniquement (ALIGN, settings, XP/étoiles) — safe-area top + 10px pour notch/Dynamic Island */
      .align-header-zone-safe {
        padding-top: calc(env(safe-area-inset-top, 0px) + 10px) !important;
      }

      /* iOS Safari : navbar au-dessus de la barre Safari (safe-area) */
      .align-bottom-nav-web {
        bottom: max(12px, env(safe-area-inset-bottom, 12px)) !important;
      }

      /* Accessibilité : focus clavier (boutons, pas nav) */
      .align-focus-visible:focus-visible {
        outline: 2px solid #FF7B2B;
        outline-offset: 3px;
      }
      .align-focus-visible:focus {
        outline: none;
      }
      .align-focus-visible:focus:not(:focus-visible) {
        outline: none;
      }

      /* ========== NAVBAR — hover halo (conteneur cliquable, pas l’image) ========== */
      /* Hover = wrapper uniquement, transform only, zéro layout shift */
      :root {
        --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
      }
      .hover-lift {
        transform: translateY(0) translateZ(0);
        box-shadow: var(--shadow-md);
        transition: transform 300ms ease, box-shadow 300ms ease !important;
        will-change: transform, box-shadow;
      }
      .hover-lift:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }
      .hover-lift:active {
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
      }
      .hover-lift:focus,
      .hover-lift:focus-visible {
        outline: none !important;
      }
      @media (hover: none) {
        .hover-lift:hover {
          transform: translateY(0) translateZ(0);
          box-shadow: var(--shadow-md);
        }
      }
      .nav-item-hover {
        transition: background-color 200ms ease;
        border-radius: 9999px;
        cursor: pointer;
      }
      .nav-item-hover:hover {
        background-color: rgba(255,255,255,0.08);
      }
      .nav-item-hover:focus, .nav-item-hover:focus-visible { outline: none; }
    </style>
  </head>
  <body>
    <!-- Recovery boot: runs BEFORE the JS bundle. Logs path/hash; saves hash to sessionStorage and redirects to /reset-password; restores hash if lost. -->
    <script>
      (function() {
        var path = (window.location.pathname || '').replace(/\/$/, '').replace(/^\//, '');
        var hash = window.location.hash || '';
        var hashPresent = hash.length > 0;
        var hashHead = hash.slice(0, 12);
        if (typeof console !== 'undefined' && console.log) {
          console.log('[RECOVERY_BOOT] path=', path, 'hashPresent=', hashPresent, 'hashHead=', hashHead);
        }

        var isResetPath = path === 'reset-password' || path.endsWith('/reset-password');
        var hasRecoveryTokens = hash.indexOf('access_token') !== -1 || hash.indexOf('type=recovery') !== -1;

        if (hasRecoveryTokens) {
          try { sessionStorage.setItem('align_recovery_hash', hash); } catch (e) {}
          if (typeof console !== 'undefined' && console.log) console.log('[RECOVERY_BOOT] saved hash to sessionStorage, redirecting with hash');
          window.location.replace((window.location.origin || '') + '/reset-password' + hash);
          return;
        }

        if (isResetPath && !hashPresent) {
          var stored = null;
          try { stored = sessionStorage.getItem('align_recovery_hash'); } catch (e) {}
          if (stored && (stored.indexOf('access_token') !== -1 || stored.indexOf('type=recovery') !== -1)) {
            if (typeof console !== 'undefined' && console.log) console.log('[RECOVERY_BOOT] restoring hash from sessionStorage');
            window.location.replace((window.location.origin || '') + '/reset-password' + stored);
            return;
          }
        }

        if (!isResetPath) {
          var search = window.location.search || '';
          var q = (hash.replace(/^#/, '') + (hash && search ? '&' : '') + search.replace(/^\?/, ''));
          var isError = q.indexOf('error=access_denied') !== -1 || q.indexOf('error_code=otp_expired') !== -1 ||
            (q.indexOf('error_description=') !== -1 && (q.indexOf('invalid') !== -1 || q.indexOf('expired') !== -1));
          if (isError) {
            if (typeof console !== 'undefined' && console.log) console.log('[RECOVERY_BOOT] detected_error=true');
            window.location.replace((window.location.origin || '') + '/reset-password?recovery_error=1');
          }
        }
      })();
    </script>
    <div id="root"></div>
  </body>
</html>









