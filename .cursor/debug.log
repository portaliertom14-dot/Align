{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769269612128,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":false},"timestamp":1769269614444,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":45,"rawEtoiles":2,"rawNiveau":0,"convertedXP":45,"convertedStars":2,"convertedLevel":0,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769269614445,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["quests"],"hasCurrentXP":false,"hasTotalStars":false,"hasCurrentLevel":false},"timestamp":1769269614533,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["quests"],"safeDbUpdatesKeys":["quests"],"updatesKeys":["quests"]},"timestamp":1769269614686,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at"]},"timestamp":1769269614688,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["quests"],"hasCurrentXP":false,"hasTotalStars":false,"hasCurrentLevel":false},"timestamp":1769269614959,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0},"timestamp":1769269614984,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769269614985,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":2,"mergedXP":45,"mergedEtoiles":2,"updatesHasXP":false,"updatesHasStars":false},"timestamp":1769269614985,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769269614986,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769269614986,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769269614986,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["quests"],"safeDbUpdatesKeys":["quests"],"updatesKeys":["quests"]},"timestamp":1769269615034,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at"]},"timestamp":1769269615034,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0},"timestamp":1769269615152,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769269615152,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":2,"mergedXP":45,"mergedEtoiles":2,"updatesHasXP":false,"updatesHasStars":false},"timestamp":1769269615152,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769269615152,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769269615152,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769269615152,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769269633331,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769269633331,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769269633331,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"autoSave.js:initializeAutoSave:ENTRY","message":"initializeAutoSave called","data":{"isAutoSaveEnabled":false,"platform":"web"},"timestamp":1769269634196,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_GET_USER","message":"After getCurrentUser","data":{"hasUser":true,"userId":"b056b9bb"},"timestamp":1769269634262,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_START_PERIODIC","message":"After startPeriodicSave","data":{"hasInterval":true},"timestamp":1769269634338,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:initializeAutoSave:SKIP_LISTENER_WEB","message":"Skipping app state listener on web","data":{"platform":"web"},"timestamp":1769269634338,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769269855842,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769269867202,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769269895429,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769269928127,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769269962047,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":false},"timestamp":1769269988351,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769269988352,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769269988353,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["quests"],"hasCurrentXP":false,"hasTotalStars":false,"hasCurrentLevel":false},"timestamp":1769269988431,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["quests"],"safeDbUpdatesKeys":["quests"],"updatesKeys":["quests"]},"timestamp":1769269988597,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at"]},"timestamp":1769269988599,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":0,"dataEtoiles":0,"dataNiveau":1},"timestamp":1769269988805,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769269988806,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":0,"dataEtoiles":0,"existingCacheXP":0,"existingCacheStars":0,"mergedXP":0,"mergedEtoiles":0,"updatesHasXP":false,"updatesHasStars":false},"timestamp":1769269988807,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":0,"resultStars":0,"resultLevel":0,"mergedXP":0,"mergedEtoiles":0},"timestamp":1769269988807,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769269988808,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769269988808,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270210053,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270210054,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270210054,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"autoSave.js:initializeAutoSave:ENTRY","message":"initializeAutoSave called","data":{"isAutoSaveEnabled":false,"platform":"web"},"timestamp":1769270210893,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_GET_USER","message":"After getCurrentUser","data":{"hasUser":true,"userId":"b056b9bb"},"timestamp":1769270210975,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_START_PERIODIC","message":"After startPeriodicSave","data":{"hasInterval":true},"timestamp":1769270211047,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:initializeAutoSave:SKIP_LISTENER_WEB","message":"Skipping app state listener on web","data":{"platform":"web"},"timestamp":1769270211047,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270280315,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270280316,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270280316,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270368366,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270368367,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270368367,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270368397,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270368398,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270368398,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270372837,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270372838,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270372838,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:addXP:BEFORE_UPDATE","message":"Before updateUserProgress","data":{"currentXP":0,"newXP":45,"newLevel":0,"xpToAdd":45},"timestamp":1769270372911,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["currentXP","currentLevel"],"hasCurrentXP":true,"hasTotalStars":false,"hasCurrentLevel":true,"currentXP":45,"currentLevel":0},"timestamp":1769270372915,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:MAP_XP","message":"Mapping currentXP to xp","data":{"currentXP":45,"xp":45},"timestamp":1769270372989,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["xp","niveau"],"dbUpdatesXP":45,"dbUpdatesNiveau":0,"safeDbUpdatesKeys":["xp","niveau"],"safeDbUpdatesXP":45,"safeDbUpdatesNiveau":0,"updatesKeys":["currentXP","currentLevel"],"updatesXP":45},"timestamp":1769270372990,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at","niveau","xp"],"xp":45,"niveau":0},"timestamp":1769270372991,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":0,"dataNiveau":0,"baseProgressDataXP":45},"timestamp":1769270373100,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":0,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270373100,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":0,"existingCacheXP":0,"existingCacheStars":0,"mergedXP":45,"mergedEtoiles":0,"updatesXP":45,"updatesHasXP":true,"updatesHasStars":false},"timestamp":1769270373101,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:addXP:AFTER_UPDATE","message":"After updateUserProgress","data":{"result":true,"resultXP":45,"resultLevel":0},"timestamp":1769270373102,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":0,"resultLevel":0,"mergedXP":45,"mergedEtoiles":0},"timestamp":1769270373101,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270373101,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270373102,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:addStars:BEFORE_UPDATE","message":"Before updateUserProgress","data":{"currentStars":0,"newStars":2,"starsToAdd":2},"timestamp":1769270373174,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["totalStars"],"hasCurrentXP":false,"hasTotalStars":true,"hasCurrentLevel":false,"totalStars":2},"timestamp":1769270373174,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:MAP_STARS","message":"Mapping totalStars to etoiles","data":{"totalStars":2,"etoiles":2},"timestamp":1769270373245,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["etoiles"],"dbUpdatesEtoiles":2,"safeDbUpdatesKeys":["etoiles"],"safeDbUpdatesEtoiles":2,"updatesKeys":["totalStars"],"updatesStars":2},"timestamp":1769270373245,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at","etoiles"],"etoiles":2},"timestamp":1769270373245,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"baseProgressDataEtoiles":2},"timestamp":1769270373327,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270373327,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":0,"mergedXP":45,"mergedEtoiles":2,"updatesStars":2,"updatesHasXP":false,"updatesHasStars":true},"timestamp":1769270373328,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769270373328,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270373328,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270373328,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:addStars:AFTER_UPDATE","message":"After updateUserProgress","data":{"result":true,"resultStars":2},"timestamp":1769270373328,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:VERIFY_DB","message":"Verifying values in DB after save","data":{"hasError":false,"verifyXP":45,"verifyEtoiles":2,"verifyNiveau":0,"savedXP":45,"savedEtoiles":0,"savedNiveau":0},"timestamp":1769270374220,"sessionId":"debug-session","runId":"run1","hypothesisId":"H11"}
{"location":"userProgressSupabase:updateUserProgress:VERIFY_DB","message":"Verifying values in DB after save","data":{"hasError":false,"verifyXP":45,"verifyEtoiles":2,"verifyNiveau":0,"savedXP":45,"savedEtoiles":2,"savedNiveau":0},"timestamp":1769270374411,"sessionId":"debug-session","runId":"run1","hypothesisId":"H11"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["currentXP","totalStars","currentLevel","currentModuleIndex","currentModuleInChapter","completedModulesInChapter","chapterHistory","activeDirection","activeSerie","activeMetier","activeModule","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"hasCurrentXP":true,"hasTotalStars":true,"hasCurrentLevel":true,"currentXP":45,"totalStars":2,"currentLevel":0},"timestamp":1769270391407,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:MAP_XP","message":"Mapping currentXP to xp","data":{"currentXP":45,"xp":45},"timestamp":1769270391484,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:MAP_STARS","message":"Mapping totalStars to etoiles","data":{"totalStars":2,"etoiles":2},"timestamp":1769270391485,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["xp","etoiles","niveau","current_module_index","current_module_in_chapter","completed_modules_in_chapter","chapter_history","activeDirection","activeSerie","activeMetier","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"dbUpdatesXP":45,"dbUpdatesEtoiles":2,"dbUpdatesNiveau":0,"safeDbUpdatesKeys":["xp","etoiles","niveau","current_module_index","activeDirection","activeSerie","activeMetier","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"safeDbUpdatesXP":45,"safeDbUpdatesEtoiles":2,"safeDbUpdatesNiveau":0,"updatesKeys":["currentXP","totalStars","currentLevel","currentModuleIndex","currentModuleInChapter","completedModulesInChapter","chapterHistory","activeDirection","activeSerie","activeMetier","activeModule","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"updatesXP":45,"updatesStars":2},"timestamp":1769270391486,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at","niveau","xp","etoiles"],"xp":45,"etoiles":2,"niveau":0},"timestamp":1769270391486,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"baseProgressDataXP":45,"baseProgressDataEtoiles":2},"timestamp":1769270391567,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270391567,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":2,"mergedXP":45,"mergedEtoiles":2,"updatesXP":45,"updatesStars":2,"updatesHasXP":true,"updatesHasStars":true},"timestamp":1769270391568,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769270391568,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270391568,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270391568,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:VERIFY_DB","message":"Verifying values in DB after save","data":{"hasError":false,"verifyXP":45,"verifyEtoiles":2,"verifyNiveau":0,"savedXP":45,"savedEtoiles":2,"savedNiveau":0},"timestamp":1769270392653,"sessionId":"debug-session","runId":"run1","hypothesisId":"H11"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769270403566,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["quests"],"hasCurrentXP":false,"hasTotalStars":false,"hasCurrentLevel":false},"timestamp":1769270403990,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["quests"],"safeDbUpdatesKeys":["quests"],"updatesKeys":["quests"]},"timestamp":1769270404142,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at"]},"timestamp":1769270404143,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0},"timestamp":1769270404296,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270404296,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":2,"mergedXP":45,"mergedEtoiles":2,"updatesHasXP":false,"updatesHasStars":false},"timestamp":1769270404297,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769270404297,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270404298,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270404298,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270443604,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270443604,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270443604,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"autoSave.js:initializeAutoSave:ENTRY","message":"initializeAutoSave called","data":{"isAutoSaveEnabled":false,"platform":"web"},"timestamp":1769270444757,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_GET_USER","message":"After getCurrentUser","data":{"hasUser":true,"userId":"b056b9bb"},"timestamp":1769270444837,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_START_PERIODIC","message":"After startPeriodicSave","data":{"hasInterval":true},"timestamp":1769270444908,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:initializeAutoSave:SKIP_LISTENER_WEB","message":"Skipping app state listener on web","data":{"platform":"web"},"timestamp":1769270444909,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769270694634,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["quests"],"hasCurrentXP":false,"hasTotalStars":false,"hasCurrentLevel":false},"timestamp":1769270695102,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["quests"],"safeDbUpdatesKeys":["quests"],"updatesKeys":["quests"]},"timestamp":1769270695251,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at"]},"timestamp":1769270695252,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":0,"dataEtoiles":0,"dataNiveau":1},"timestamp":1769270696031,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270696032,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":0,"dataEtoiles":0,"existingCacheXP":0,"existingCacheStars":0,"mergedXP":0,"mergedEtoiles":0,"updatesHasXP":false,"updatesHasStars":false},"timestamp":1769270696032,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":0,"resultStars":0,"resultLevel":0,"mergedXP":0,"mergedEtoiles":0},"timestamp":1769270696033,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270696034,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270696035,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270856185,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270856185,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270856185,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"autoSave.js:initializeAutoSave:ENTRY","message":"initializeAutoSave called","data":{"isAutoSaveEnabled":false,"platform":"web"},"timestamp":1769270857236,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_GET_USER","message":"After getCurrentUser","data":{"hasUser":true,"userId":"b056b9bb"},"timestamp":1769270857301,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_START_PERIODIC","message":"After startPeriodicSave","data":{"hasInterval":true},"timestamp":1769270857452,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:initializeAutoSave:SKIP_LISTENER_WEB","message":"Skipping app state listener on web","data":{"platform":"web"},"timestamp":1769270857452,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270957704,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270957705,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270957705,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270957798,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270957798,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270957799,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":0,"dataEtoiles":0,"dataNiveau":1,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270961025,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":0,"rawEtoiles":0,"rawNiveau":1,"convertedXP":0,"convertedStars":0,"convertedLevel":1,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270961026,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:ZERO_VALUES_CHECK","message":"Progress exists but XP/stars are 0, checking if real or retrieval issue","data":{"dataXP":0,"dataEtoiles":0,"progressXP":0,"progressStars":0},"timestamp":1769270961026,"sessionId":"debug-session","runId":"run1","hypothesisId":"H8"}
{"location":"userProgressSupabase:addXP:BEFORE_UPDATE","message":"Before updateUserProgress","data":{"currentXP":0,"newXP":45,"newLevel":0,"xpToAdd":45},"timestamp":1769270961101,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["currentXP","currentLevel"],"hasCurrentXP":true,"hasTotalStars":false,"hasCurrentLevel":true,"currentXP":45,"currentLevel":0},"timestamp":1769270961101,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:MAP_XP","message":"Mapping currentXP to xp","data":{"currentXP":45,"xp":45},"timestamp":1769270961179,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["xp","niveau"],"dbUpdatesXP":45,"dbUpdatesNiveau":0,"safeDbUpdatesKeys":["xp","niveau"],"safeDbUpdatesXP":45,"safeDbUpdatesNiveau":0,"updatesKeys":["currentXP","currentLevel"],"updatesXP":45},"timestamp":1769270961179,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at","niveau","xp"],"xp":45,"niveau":0},"timestamp":1769270961180,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":0,"dataNiveau":0,"baseProgressDataXP":45},"timestamp":1769270961300,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":0,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270961300,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":0,"existingCacheXP":0,"existingCacheStars":0,"mergedXP":45,"mergedEtoiles":0,"updatesXP":45,"updatesHasXP":true,"updatesHasStars":false},"timestamp":1769270961301,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:addXP:AFTER_UPDATE","message":"After updateUserProgress","data":{"result":true,"resultXP":45,"resultLevel":0},"timestamp":1769270961302,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":0,"resultLevel":0,"mergedXP":45,"mergedEtoiles":0},"timestamp":1769270961301,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270961301,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270961302,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:addStars:BEFORE_UPDATE","message":"Before updateUserProgress","data":{"currentStars":0,"newStars":2,"starsToAdd":2},"timestamp":1769270961383,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["totalStars"],"hasCurrentXP":false,"hasTotalStars":true,"hasCurrentLevel":false,"totalStars":2},"timestamp":1769270961383,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:MAP_STARS","message":"Mapping totalStars to etoiles","data":{"totalStars":2,"etoiles":2},"timestamp":1769270961455,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["etoiles"],"dbUpdatesEtoiles":2,"safeDbUpdatesKeys":["etoiles"],"safeDbUpdatesEtoiles":2,"updatesKeys":["totalStars"],"updatesStars":2},"timestamp":1769270961456,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at","etoiles"],"etoiles":2},"timestamp":1769270961456,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"baseProgressDataEtoiles":2},"timestamp":1769270961578,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270961579,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":0,"mergedXP":45,"mergedEtoiles":2,"updatesStars":2,"updatesHasXP":false,"updatesHasStars":true},"timestamp":1769270961579,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769270961579,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270961580,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270961580,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:addStars:AFTER_UPDATE","message":"After updateUserProgress","data":{"result":true,"resultStars":2},"timestamp":1769270961580,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:VERIFY_DB","message":"Verifying values in DB after save","data":{"hasError":false,"verifyXP":45,"verifyEtoiles":2,"verifyNiveau":0,"savedXP":45,"savedEtoiles":0,"savedNiveau":0},"timestamp":1769270962417,"sessionId":"debug-session","runId":"run1","hypothesisId":"H11"}
{"location":"userProgressSupabase:updateUserProgress:VERIFY_DB","message":"Verifying values in DB after save","data":{"hasError":false,"verifyXP":45,"verifyEtoiles":2,"verifyNiveau":0,"savedXP":45,"savedEtoiles":2,"savedNiveau":0},"timestamp":1769270962713,"sessionId":"debug-session","runId":"run1","hypothesisId":"H11"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["currentXP","totalStars","currentLevel","currentModuleIndex","currentModuleInChapter","completedModulesInChapter","chapterHistory","activeDirection","activeSerie","activeMetier","activeModule","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"hasCurrentXP":true,"hasTotalStars":true,"hasCurrentLevel":true,"currentXP":45,"totalStars":2,"currentLevel":0},"timestamp":1769270977769,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:MAP_XP","message":"Mapping currentXP to xp","data":{"currentXP":45,"xp":45},"timestamp":1769270977842,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:MAP_STARS","message":"Mapping totalStars to etoiles","data":{"totalStars":2,"etoiles":2},"timestamp":1769270977842,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["xp","etoiles","niveau","current_module_index","current_module_in_chapter","completed_modules_in_chapter","chapter_history","activeDirection","activeSerie","activeMetier","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"dbUpdatesXP":45,"dbUpdatesEtoiles":2,"dbUpdatesNiveau":0,"safeDbUpdatesKeys":["xp","etoiles","niveau","current_module_index","activeDirection","activeSerie","activeMetier","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"safeDbUpdatesXP":45,"safeDbUpdatesEtoiles":2,"safeDbUpdatesNiveau":0,"updatesKeys":["currentXP","totalStars","currentLevel","currentModuleIndex","currentModuleInChapter","completedModulesInChapter","chapterHistory","activeDirection","activeSerie","activeMetier","activeModule","currentChapter","currentLesson","completedLevels","quizAnswers","metierQuizAnswers"],"updatesXP":45,"updatesStars":2},"timestamp":1769270977843,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at","niveau","xp","etoiles"],"xp":45,"etoiles":2,"niveau":0},"timestamp":1769270977843,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"baseProgressDataXP":45,"baseProgressDataEtoiles":2},"timestamp":1769270977995,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270977995,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":2,"mergedXP":45,"mergedEtoiles":2,"updatesXP":45,"updatesStars":2,"updatesHasXP":true,"updatesHasStars":true},"timestamp":1769270977995,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769270977995,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270977996,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270977996,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:updateUserProgress:VERIFY_DB","message":"Verifying values in DB after save","data":{"hasError":false,"verifyXP":45,"verifyEtoiles":2,"verifyNiveau":0,"savedXP":45,"savedEtoiles":2,"savedNiveau":0},"timestamp":1769270979157,"sessionId":"debug-session","runId":"run1","hypothesisId":"H11"}
{"location":"autoSave.js:MODULE_LOAD","message":"AutoSave module loaded","data":{"platform":"web","hasAppState":true},"timestamp":1769270979360,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:ENTRY","message":"updateUserProgress called","data":{"updatesKeys":["quests"],"hasCurrentXP":false,"hasTotalStars":false,"hasCurrentLevel":false},"timestamp":1769270979752,"sessionId":"debug-session","runId":"run2","hypothesisId":"H5"}
{"location":"userProgressSupabase:updateUserProgress:BEFORE_UPSERT","message":"Before upsertUserProgress","data":{"userId":"b056b9bb...","dbUpdatesKeys":["quests"],"safeDbUpdatesKeys":["quests"],"updatesKeys":["quests"]},"timestamp":1769270979909,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userService:upsertUserProgress:BEFORE_UPSERT","message":"Before Supabase upsert","data":{"userId":"b056b9bb...","fieldsToUpdate":["id","updated_at"]},"timestamp":1769270979910,"sessionId":"debug-session","runId":"post-fix","hypothesisId":"FIX"}
{"location":"userService:upsertUserProgress:AFTER_UPSERT","message":"After Supabase upsert","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0},"timestamp":1769270980080,"sessionId":"debug-session","runId":"run1","hypothesisId":"H1"}
{"location":"userProgressSupabase:updateUserProgress:AFTER_UPSERT","message":"After upsertUserProgress","data":{"hasError":false,"hasData":true,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270980080,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"userProgressSupabase:updateUserProgress:MERGE","message":"Merging data","data":{"dataXP":45,"dataEtoiles":2,"existingCacheXP":45,"existingCacheStars":2,"mergedXP":45,"mergedEtoiles":2,"updatesHasXP":false,"updatesHasStars":false},"timestamp":1769270980080,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:updateUserProgress:RESULT","message":"Final merged result","data":{"resultXP":45,"resultStars":2,"resultLevel":0,"mergedXP":45,"mergedEtoiles":2},"timestamp":1769270980081,"sessionId":"debug-session","runId":"run2","hypothesisId":"H10"}
{"location":"userProgressSupabase.js:updateUserProgress:BEFORE_MARK_DIRTY","message":"Before marking progress dirty","data":{},"timestamp":1769270980081,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase.js:updateUserProgress:AFTER_MARK_DIRTY","message":"After marking progress dirty","data":{},"timestamp":1769270980081,"sessionId":"debug-session","runId":"run1","hypothesisId":"H4"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":true},"timestamp":1769270997161,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":45,"rawEtoiles":2,"rawNiveau":0,"convertedXP":45,"convertedStars":2,"convertedLevel":0,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769270997161,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:initializeAutoSave:ENTRY","message":"initializeAutoSave called","data":{"isAutoSaveEnabled":false,"platform":"web"},"timestamp":1769270998315,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_GET_USER","message":"After getCurrentUser","data":{"hasUser":true,"userId":"b056b9bb"},"timestamp":1769270998396,"sessionId":"debug-session","runId":"run1","hypothesisId":"H2"}
{"location":"autoSave.js:initializeAutoSave:AFTER_START_PERIODIC","message":"After startPeriodicSave","data":{"hasInterval":true},"timestamp":1769270998473,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"autoSave.js:initializeAutoSave:SKIP_LISTENER_WEB","message":"Skipping app state listener on web","data":{"platform":"web"},"timestamp":1769270998473,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":false},"timestamp":1769271315506,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":45,"rawEtoiles":2,"rawNiveau":0,"convertedXP":45,"convertedStars":2,"convertedLevel":0,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769271315512,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":false},"timestamp":1769271642208,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":45,"rawEtoiles":2,"rawNiveau":0,"convertedXP":45,"convertedStars":2,"convertedLevel":0,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769271642219,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":false},"timestamp":1769272002421,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":45,"rawEtoiles":2,"rawNiveau":0,"convertedXP":45,"convertedStars":2,"convertedLevel":0,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769272002427,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
{"location":"userProgressSupabase:getUserProgress:AFTER_DB_FETCH","message":"After getUserProgressFromDB","data":{"hasData":true,"hasError":false,"dataXP":45,"dataEtoiles":2,"dataNiveau":0,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd","forceRefresh":false},"timestamp":1769272362493,"sessionId":"debug-session","runId":"run2","hypothesisId":"H9"}
{"location":"userProgressSupabase:getUserProgress:FROM_DB","message":"Progress loaded from Supabase","data":{"rawXP":45,"rawEtoiles":2,"rawNiveau":0,"convertedXP":45,"convertedStars":2,"convertedLevel":0,"hasData":true,"dataId":"b056b9bb-7ada-4a64-b75a-63b6a392e8bd"},"timestamp":1769272362498,"sessionId":"debug-session","runId":"run1","hypothesisId":"H3"}
